# wrpc
为了加深RPC的理解，尝试写的简易RPC框架，用ETCD3作为服务发现，支持负载均衡

# 相关技术
* 1、使用`TCP` + `json`作为协议
 
* 2、远程调用时，使用反射进行实际的调用

* 3、用etcd3来作服务注册发现及注销

# 在写该项目时，遇到的问题

一、协议的选用，是`UDP`还是`TCP`，之后考虑到简单性选择了`TCP`。两者区别参考如下文章

* TCP和UDP的优缺点及区别：（https://www.cnblogs.com/xiaomayizoe/p/5258754.html）

二、方法调用问题

* 问题描述：GO中的反射无法直接根据`结构体名及方法名`直接映射成对应的实例并调用（java可以直接映射成对应的实例），如何将远程读取到的二进制数据转换成对应的方法并调用？
* 解决方案：服务启动时，将需要暴露的方法注册进绶存中。如：使用map来存放，将`服务名.方法名`作key，将调用的信息经过反射后作为value。如此，当接收到信息时，直接根据调用的方法来获取对应的实例并执行。还可以进行方法过虑，不会调用到未暴露的方法。

三、序列化问题。

* 问题描述：在服务端接收到请求之后，根据事前约定的协议进行反序列化。在具体调用方法时，如何将参数是自定义复杂结构实例化。
* 解决方案：此问题和上一个问题类似。直接根据获取到的实例信息，使用`reflect.New`来创建对应的实例，然后将对应的值赋其之即可。

四、


